<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>3D Transforms: transform-style</title>
	<link rel="stylesheet" href="3d-transforms.css" type="text/css">
	<style type="text/css">

#stage{
    -webkit-perspective-origin: 50% -100px;
       -moz-perspective-origin: 50% -100px;
        -ms-perspective-origin: 50% -100px;
         -o-perspective-origin: 50% -100px;
            perspective-origin: 50% -100px;

    -webkit-perspective: 500px;
       -moz-perspective: 500px;
        -ms-perspective: 500px;
         -o-perspective: 500px;
            perspective: 500px;
}



label{margin-left: 1em;}

</style>

</head>
<body id="transformstyle">

<h1>3D Transforms: the <code>transform-style</code> property</h1>

 <form id="toggle">
 <p>Use the check box below to toggle between the <code>flat</code> and <code>preserve-3d</code> values for <code>transform-style</code>.</p>	
        <p>
            <input type="checkbox" id="toggle3d" checked> <label for="toggle3d"><code>transform-style:</code><code id="ts">flat</code> </label>
        </p>
    </form>
    

<div id="stage">
  <div class="uncube" id="transformstylecube">
	<figure class="front bf">1</figure>
	<figure class="back bf">2</figure>
	<figure class="right bf">3</figure>
  </div>
</div>

<script type="application/javascript" src="3d-transforms-pf.js"></script>
<script type="application/javascript">
(function(d){
	var toggle = d.getElementById('toggle3d'), css = d.styleSheets[1].cssRules[1];
	
	console.log( css );
	
	
	if( toggle ){
		toggle.addEventListener('change', function(e){
			e.preventDefault();
			// var stage = d.getElementById('stage');
			// consider adding support for non classList browsers
			// e.target.checked ? stage.classList.add('perspective') : stage.classList.remove('perspective');
		
			var val = /flat/.test( css.cssText ) ? 'preserve-3d' : 'flat'; 
		
			var newrule = css.cssText.replace(/flat|preserve\-3d/,val);
			
			d.styleSheets[1].insertRule(newrule ,1); // Insert at the top of the rule stack.
			d.styleSheets[1].deleteRule(2); // Insert at the top of the rule stack.
			
			console.log( newrule ); 
			
		}, false);
	}
	
	
	
})(document);
</script>
</body>
</html>
