<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>3D CSS Transforms: rotate3d()</title>
	<link rel="stylesheet" href="3d-transforms.css" type="text/css">
	<style type="text/css">
	.plane{	
		-webkit-transform: rotate3d(0,0,0,0deg);
		   -moz-transform: rotate3d(0,0,0,0deg); 
		        transform: rotate3d(0,0,0,0deg); 
	}
	header,form{
		background: rgba(255,255,255,.9);
	}
	form{	
		width:inherit;
	}
	</style>
</head>
<body>
    <header>
        <h1>3D CSS Transforms: <code>rotate3d()</code></h1>
        <p>Adjust the value below to understand the effect of <code id="r3d">rotate3d()</code>.</p>
    </header>
    
    <form id="rotate3">
    	<p>
    	<label for="x">x</label>
    	<input type="number" id="x" name="x" value="0" required>
    	</p>
    	
    	<p>
    	<label for="y">y</label>
    	<input type="number" id="y" name="y" value="0" required>
    	</p>
    	
    	<p>
    	<label for="z">z</label>
    	<input type="number" id="z" name="z" value="0" required>
    	</p>
    	
    	<p>
    	<label for="angle">angle</label>
    	<input type="text" id="angle" name="angle" value="0deg"  pattern="-|[.0-9]{1,}(deg|turn|rad|grad)">
    	</p>
    	<p><button type="submit">Update</button> <button type="reset">Reset</button></p>
    	<br style="clear:both;">
    </form>

    <div id="stage" class="perspective rotate3d">
        <div class="plane">1</div>
        <div class="plane">2</div>
        <div class="plane">3</div>
    </div>

<script type="application/javascript" src="3d-transforms.js"></script>

<script>
var form = document.forms[0];

form.addEventListener('reset', function(e){
	var css = document.styleSheets[1],
	    newrule = css.cssRules[0].cssText.replace(/rotate3d\([0-9]{1,}\, [0-9]{1,}, [0-9]{1,}, [0-9]{1,}(deg|grad|turn|rad)/,"rotate3d(0,0,0,0$1");
	    css.insertRule(newrule,0); // Insert at the top of the rule stack.
	    css.deleteRule(1);         // Delete what is now the second rule.
} ,false);

form.addEventListener('submit', function(e){
	e.preventDefault();
	var css = document.styleSheets[1],  // using the embedded style sheet.
		inp = document.querySelectorAll('input'),
		newrule = css.cssRules[0].cssText.replace(/rotate3d\([0-9]{1,}\, [0-9]{1,}, [0-9]{1,}, [0-9]{1,}deg|grad|turn|rad/,'rotate3d('+inp[0].value+','+inp[1].value+','+inp[2].value+','+inp[3].value)
		css.insertRule(newrule,0); // Insert at the top of the rule stack.
		css.deleteRule(1);         // Delete what is now the second rule.
},false)
</script>


</body>
</html>
